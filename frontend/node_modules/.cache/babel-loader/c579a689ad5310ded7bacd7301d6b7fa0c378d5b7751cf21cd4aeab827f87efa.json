{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FunctionScope = void 0;\nconst types_1 = require(\"@typescript-eslint/types\");\nconst ScopeBase_1 = require(\"./ScopeBase\");\nconst ScopeType_1 = require(\"./ScopeType\");\nclass FunctionScope extends ScopeBase_1.ScopeBase {\n  constructor(scopeManager, upperScope, block, isMethodDefinition) {\n    super(scopeManager, ScopeType_1.ScopeType.function, upperScope, block, isMethodDefinition);\n    // section 9.2.13, FunctionDeclarationInstantiation.\n    // NOTE Arrow functions never have an arguments objects.\n    if (this.block.type !== types_1.AST_NODE_TYPES.ArrowFunctionExpression) {\n      this.defineVariable('arguments', this.set, this.variables, null, null);\n    }\n  }\n  // References in default parameters isn't resolved to variables which are in their function body.\n  //     const x = 1\n  //     function f(a = x) { // This `x` is resolved to the `x` in the outer scope.\n  //         const x = 2\n  //         console.log(a)\n  //     }\n  isValidResolution(ref, variable) {\n    var _a, _b;\n    // If `options.globalReturn` is true, `this.block` becomes a Program node.\n    if (this.block.type === types_1.AST_NODE_TYPES.Program) {\n      return true;\n    }\n    const bodyStart = (_b = (_a = this.block.body) === null || _a === void 0 ? void 0 : _a.range[0]) !== null && _b !== void 0 ? _b : -1;\n    // It's invalid resolution in the following case:\n    return !(variable.scope === this && ref.identifier.range[0] < bodyStart &&\n    // the reference is in the parameter part.\n    variable.defs.every(d => d.name.range[0] >= bodyStart) // the variable is in the body.\n    );\n  }\n}\nexports.FunctionScope = FunctionScope;","map":{"version":3,"names":["types_1","require","ScopeBase_1","ScopeType_1","FunctionScope","ScopeBase","constructor","scopeManager","upperScope","block","isMethodDefinition","ScopeType","function","type","AST_NODE_TYPES","ArrowFunctionExpression","defineVariable","set","variables","isValidResolution","ref","variable","Program","bodyStart","_b","_a","body","range","scope","identifier","defs","every","d","name","exports"],"sources":["../../src/scope/FunctionScope.ts"],"sourcesContent":[null],"mappings":";;;;;;AACA,MAAAA,OAAA,GAAAC,OAAA;AAMA,MAAAC,WAAA,GAAAD,OAAA;AACA,MAAAE,WAAA,GAAAF,OAAA;AAEA,MAAMG,aAAc,SAAQF,WAAA,CAAAG,SAS3B;EACCC,YACEC,YAA0B,EAC1BC,UAAkC,EAClCC,KAA6B,EAC7BC,kBAA2B;IAE3B,KAAK,CACHH,YAAY,EACZJ,WAAA,CAAAQ,SAAS,CAACC,QAAQ,EAClBJ,UAAU,EACVC,KAAK,EACLC,kBAAkB,CACnB;IAED;IACA;IACA,IAAI,IAAI,CAACD,KAAK,CAACI,IAAI,KAAKb,OAAA,CAAAc,cAAc,CAACC,uBAAuB,EAAE;MAC9D,IAAI,CAACC,cAAc,CAAC,WAAW,EAAE,IAAI,CAACC,GAAG,EAAE,IAAI,CAACC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;;EAE1E;EAEA;EACA;EACA;EACA;EACA;EACA;EACUC,iBAAiBA,CAACC,GAAc,EAAEC,QAAkB;;IAC5D;IACA,IAAI,IAAI,CAACZ,KAAK,CAACI,IAAI,KAAKb,OAAA,CAAAc,cAAc,CAACQ,OAAO,EAAE;MAC9C,OAAO,IAAI;;IAGb,MAAMC,SAAS,GAAG,CAAAC,EAAA,IAAAC,EAAA,OAAI,CAAChB,KAAK,CAACiB,IAAI,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,KAAK,CAAC,CAAC,CAAC,cAAAH,EAAA,cAAAA,EAAA,GAAI,CAAC,CAAC;IAEjD;IACA,OAAO,EAEHH,QAAQ,CAACO,KAAK,KAAK,IAAI,IACvBR,GAAG,CAACS,UAAU,CAACF,KAAK,CAAC,CAAC,CAAC,GAAGJ,SAAS;IAAI;IACvCF,QAAQ,CAACS,IAAI,CAACC,KAAK,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAACN,KAAK,CAAC,CAAC,CAAC,IAAIJ,SAAS,CAAC,CACtD;IAAA,CACH;EACH;;AAGOW,OAAA,CAAA9B,aAAA,GAAAA,aAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}