{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.astConverter = void 0;\nconst convert_1 = require(\"./convert\");\nconst convert_comments_1 = require(\"./convert-comments\");\nconst node_utils_1 = require(\"./node-utils\");\nconst simple_traverse_1 = require(\"./simple-traverse\");\nfunction astConverter(ast, parseSettings, shouldPreserveNodeMaps) {\n  /**\n   * The TypeScript compiler produced fundamental parse errors when parsing the\n   * source.\n   */\n  const {\n    parseDiagnostics\n  } = ast;\n  if (parseDiagnostics.length) {\n    throw (0, convert_1.convertError)(parseDiagnostics[0]);\n  }\n  /**\n   * Recursively convert the TypeScript AST into an ESTree-compatible AST\n   */\n  const instance = new convert_1.Converter(ast, {\n    errorOnUnknownASTType: parseSettings.errorOnUnknownASTType || false,\n    shouldPreserveNodeMaps\n  });\n  const estree = instance.convertProgram();\n  /**\n   * Optionally remove range and loc if specified\n   */\n  if (!parseSettings.range || !parseSettings.loc) {\n    (0, simple_traverse_1.simpleTraverse)(estree, {\n      enter: node => {\n        if (!parseSettings.range) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- TS 4.0 made this an error because the types aren't optional\n          // @ts-expect-error\n          delete node.range;\n        }\n        if (!parseSettings.loc) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- TS 4.0 made this an error because the types aren't optional\n          // @ts-expect-error\n          delete node.loc;\n        }\n      }\n    });\n  }\n  /**\n   * Optionally convert and include all tokens in the AST\n   */\n  if (parseSettings.tokens) {\n    estree.tokens = (0, node_utils_1.convertTokens)(ast);\n  }\n  /**\n   * Optionally convert and include all comments in the AST\n   */\n  if (parseSettings.comment) {\n    estree.comments = (0, convert_comments_1.convertComments)(ast, parseSettings.code);\n  }\n  const astMaps = instance.getASTMaps();\n  return {\n    estree,\n    astMaps\n  };\n}\nexports.astConverter = astConverter;","map":{"version":3,"names":["convert_1","require","convert_comments_1","node_utils_1","simple_traverse_1","astConverter","ast","parseSettings","shouldPreserveNodeMaps","parseDiagnostics","length","convertError","instance","Converter","errorOnUnknownASTType","estree","convertProgram","range","loc","simpleTraverse","enter","node","tokens","convertTokens","comment","comments","convertComments","code","astMaps","getASTMaps","exports"],"sources":["../src/ast-converter.ts"],"sourcesContent":[null],"mappings":";;;;;;AAGA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,kBAAA,GAAAD,OAAA;AACA,MAAAE,YAAA,GAAAF,OAAA;AAEA,MAAAG,iBAAA,GAAAH,OAAA;AAGA,SAAgBI,YAAYA,CAC1BC,GAAe,EACfC,aAA4B,EAC5BC,sBAA+B;EAE/B;;;;EAIA,MAAM;IAAEC;EAAgB,CAAE,GAAGH,GAAG;EAChC,IAAIG,gBAAgB,CAACC,MAAM,EAAE;IAC3B,MAAM,IAAAV,SAAA,CAAAW,YAAY,EAACF,gBAAgB,CAAC,CAAC,CAAC,CAAC;;EAGzC;;;EAGA,MAAMG,QAAQ,GAAG,IAAIZ,SAAA,CAAAa,SAAS,CAACP,GAAG,EAAE;IAClCQ,qBAAqB,EAAEP,aAAa,CAACO,qBAAqB,IAAI,KAAK;IACnEN;GACD,CAAC;EAEF,MAAMO,MAAM,GAAGH,QAAQ,CAACI,cAAc,EAAE;EAExC;;;EAGA,IAAI,CAACT,aAAa,CAACU,KAAK,IAAI,CAACV,aAAa,CAACW,GAAG,EAAE;IAC9C,IAAAd,iBAAA,CAAAe,cAAc,EAACJ,MAAM,EAAE;MACrBK,KAAK,EAAEC,IAAI,IAAG;QACZ,IAAI,CAACd,aAAa,CAACU,KAAK,EAAE;UACxB;UACA;UACA,OAAOI,IAAI,CAACJ,KAAK;;QAEnB,IAAI,CAACV,aAAa,CAACW,GAAG,EAAE;UACtB;UACA;UACA,OAAOG,IAAI,CAACH,GAAG;;MAEnB;KACD,CAAC;;EAGJ;;;EAGA,IAAIX,aAAa,CAACe,MAAM,EAAE;IACxBP,MAAM,CAACO,MAAM,GAAG,IAAAnB,YAAA,CAAAoB,aAAa,EAACjB,GAAG,CAAC;;EAGpC;;;EAGA,IAAIC,aAAa,CAACiB,OAAO,EAAE;IACzBT,MAAM,CAACU,QAAQ,GAAG,IAAAvB,kBAAA,CAAAwB,eAAe,EAACpB,GAAG,EAAEC,aAAa,CAACoB,IAAI,CAAC;;EAG5D,MAAMC,OAAO,GAAGhB,QAAQ,CAACiB,UAAU,EAAE;EAErC,OAAO;IAAEd,MAAM;IAAEa;EAAO,CAAE;AAC5B;AA7DAE,OAAA,CAAAzB,YAAA,GAAAA,YAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}