{"ast":null,"code":"var canReorder = require('./reorderable').canReorder;\nvar canReorderSingle = require('./reorderable').canReorderSingle;\nvar extractProperties = require('./extract-properties');\nvar rulesOverlap = require('./rules-overlap');\nvar serializeRules = require('../../writer/one-time').rules;\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\nvar Token = require('../../tokenizer/token');\nfunction mergeMediaQueries(tokens, context) {\n  var mergeSemantically = context.options.level[OptimizationLevel.Two].mergeSemantically;\n  var specificityCache = context.cache.specificity;\n  var candidates = {};\n  var reduced = [];\n  for (var i = tokens.length - 1; i >= 0; i--) {\n    var token = tokens[i];\n    if (token[0] != Token.NESTED_BLOCK) {\n      continue;\n    }\n    var key = serializeRules(token[1]);\n    var candidate = candidates[key];\n    if (!candidate) {\n      candidate = [];\n      candidates[key] = candidate;\n    }\n    candidate.push(i);\n  }\n  for (var name in candidates) {\n    var positions = candidates[name];\n    positionLoop: for (var j = positions.length - 1; j > 0; j--) {\n      var positionOne = positions[j];\n      var tokenOne = tokens[positionOne];\n      var positionTwo = positions[j - 1];\n      var tokenTwo = tokens[positionTwo];\n      directionLoop: for (var direction = 1; direction >= -1; direction -= 2) {\n        var topToBottom = direction == 1;\n        var from = topToBottom ? positionOne + 1 : positionTwo - 1;\n        var to = topToBottom ? positionTwo : positionOne;\n        var delta = topToBottom ? 1 : -1;\n        var source = topToBottom ? tokenOne : tokenTwo;\n        var target = topToBottom ? tokenTwo : tokenOne;\n        var movedProperties = extractProperties(source);\n        while (from != to) {\n          var traversedProperties = extractProperties(tokens[from]);\n          from += delta;\n          if (mergeSemantically && allSameRulePropertiesCanBeReordered(movedProperties, traversedProperties, specificityCache)) {\n            continue;\n          }\n          if (!canReorder(movedProperties, traversedProperties, specificityCache)) {\n            continue directionLoop;\n          }\n        }\n        target[2] = topToBottom ? source[2].concat(target[2]) : target[2].concat(source[2]);\n        source[2] = [];\n        reduced.push(target);\n        continue positionLoop;\n      }\n    }\n  }\n  return reduced;\n}\nfunction allSameRulePropertiesCanBeReordered(movedProperties, traversedProperties, specificityCache) {\n  var movedProperty;\n  var movedRule;\n  var traversedProperty;\n  var traversedRule;\n  var i, l;\n  var j, m;\n  for (i = 0, l = movedProperties.length; i < l; i++) {\n    movedProperty = movedProperties[i];\n    movedRule = movedProperty[5];\n    for (j = 0, m = traversedProperties.length; j < m; j++) {\n      traversedProperty = traversedProperties[j];\n      traversedRule = traversedProperty[5];\n      if (rulesOverlap(movedRule, traversedRule, true) && !canReorderSingle(movedProperty, traversedProperty, specificityCache)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\nmodule.exports = mergeMediaQueries;","map":{"version":3,"names":["canReorder","require","canReorderSingle","extractProperties","rulesOverlap","serializeRules","rules","OptimizationLevel","Token","mergeMediaQueries","tokens","context","mergeSemantically","options","level","Two","specificityCache","cache","specificity","candidates","reduced","i","length","token","NESTED_BLOCK","key","candidate","push","name","positions","positionLoop","j","positionOne","tokenOne","positionTwo","tokenTwo","directionLoop","direction","topToBottom","from","to","delta","source","target","movedProperties","traversedProperties","allSameRulePropertiesCanBeReordered","concat","movedProperty","movedRule","traversedProperty","traversedRule","l","m","module","exports"],"sources":["C:/Users/chest/OneDrive/Documentos/GitHub/HackUPC/frontend/node_modules/clean-css/lib/optimizer/level-2/merge-media-queries.js"],"sourcesContent":["var canReorder = require('./reorderable').canReorder;\nvar canReorderSingle = require('./reorderable').canReorderSingle;\nvar extractProperties = require('./extract-properties');\nvar rulesOverlap = require('./rules-overlap');\n\nvar serializeRules = require('../../writer/one-time').rules;\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\nvar Token = require('../../tokenizer/token');\n\nfunction mergeMediaQueries(tokens, context) {\n  var mergeSemantically = context.options.level[OptimizationLevel.Two].mergeSemantically;\n  var specificityCache = context.cache.specificity;\n  var candidates = {};\n  var reduced = [];\n\n  for (var i = tokens.length - 1; i >= 0; i--) {\n    var token = tokens[i];\n    if (token[0] != Token.NESTED_BLOCK) {\n      continue;\n    }\n\n    var key = serializeRules(token[1]);\n    var candidate = candidates[key];\n    if (!candidate) {\n      candidate = [];\n      candidates[key] = candidate;\n    }\n\n    candidate.push(i);\n  }\n\n  for (var name in candidates) {\n    var positions = candidates[name];\n\n    positionLoop:\n    for (var j = positions.length - 1; j > 0; j--) {\n      var positionOne = positions[j];\n      var tokenOne = tokens[positionOne];\n      var positionTwo = positions[j - 1];\n      var tokenTwo = tokens[positionTwo];\n\n      directionLoop:\n      for (var direction = 1; direction >= -1; direction -= 2) {\n        var topToBottom = direction == 1;\n        var from = topToBottom ? positionOne + 1 : positionTwo - 1;\n        var to = topToBottom ? positionTwo : positionOne;\n        var delta = topToBottom ? 1 : -1;\n        var source = topToBottom ? tokenOne : tokenTwo;\n        var target = topToBottom ? tokenTwo : tokenOne;\n        var movedProperties = extractProperties(source);\n\n        while (from != to) {\n          var traversedProperties = extractProperties(tokens[from]);\n          from += delta;\n\n          if (mergeSemantically\n            && allSameRulePropertiesCanBeReordered(movedProperties, traversedProperties, specificityCache)\n          ) {\n            continue;\n          }\n\n          if (!canReorder(movedProperties, traversedProperties, specificityCache)) { continue directionLoop; }\n        }\n\n        target[2] = topToBottom\n          ? source[2].concat(target[2])\n          : target[2].concat(source[2]);\n        source[2] = [];\n\n        reduced.push(target);\n        continue positionLoop;\n      }\n    }\n  }\n\n  return reduced;\n}\n\nfunction allSameRulePropertiesCanBeReordered(movedProperties, traversedProperties, specificityCache) {\n  var movedProperty;\n  var movedRule;\n  var traversedProperty;\n  var traversedRule;\n  var i, l;\n  var j, m;\n\n  for (i = 0, l = movedProperties.length; i < l; i++) {\n    movedProperty = movedProperties[i];\n    movedRule = movedProperty[5];\n\n    for (j = 0, m = traversedProperties.length; j < m; j++) {\n      traversedProperty = traversedProperties[j];\n      traversedRule = traversedProperty[5];\n\n      if (rulesOverlap(movedRule, traversedRule, true)\n        && !canReorderSingle(movedProperty, traversedProperty, specificityCache)) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = mergeMediaQueries;\n"],"mappings":"AAAA,IAAIA,UAAU,GAAGC,OAAO,CAAC,eAAe,CAAC,CAACD,UAAU;AACpD,IAAIE,gBAAgB,GAAGD,OAAO,CAAC,eAAe,CAAC,CAACC,gBAAgB;AAChE,IAAIC,iBAAiB,GAAGF,OAAO,CAAC,sBAAsB,CAAC;AACvD,IAAIG,YAAY,GAAGH,OAAO,CAAC,iBAAiB,CAAC;AAE7C,IAAII,cAAc,GAAGJ,OAAO,CAAC,uBAAuB,CAAC,CAACK,KAAK;AAC3D,IAAIC,iBAAiB,GAAGN,OAAO,CAAC,kCAAkC,CAAC,CAACM,iBAAiB;AACrF,IAAIC,KAAK,GAAGP,OAAO,CAAC,uBAAuB,CAAC;AAE5C,SAASQ,iBAAiBA,CAACC,MAAM,EAAEC,OAAO,EAAE;EAC1C,IAAIC,iBAAiB,GAAGD,OAAO,CAACE,OAAO,CAACC,KAAK,CAACP,iBAAiB,CAACQ,GAAG,CAAC,CAACH,iBAAiB;EACtF,IAAII,gBAAgB,GAAGL,OAAO,CAACM,KAAK,CAACC,WAAW;EAChD,IAAIC,UAAU,GAAG,CAAC,CAAC;EACnB,IAAIC,OAAO,GAAG,EAAE;EAEhB,KAAK,IAAIC,CAAC,GAAGX,MAAM,CAACY,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC3C,IAAIE,KAAK,GAAGb,MAAM,CAACW,CAAC,CAAC;IACrB,IAAIE,KAAK,CAAC,CAAC,CAAC,IAAIf,KAAK,CAACgB,YAAY,EAAE;MAClC;IACF;IAEA,IAAIC,GAAG,GAAGpB,cAAc,CAACkB,KAAK,CAAC,CAAC,CAAC,CAAC;IAClC,IAAIG,SAAS,GAAGP,UAAU,CAACM,GAAG,CAAC;IAC/B,IAAI,CAACC,SAAS,EAAE;MACdA,SAAS,GAAG,EAAE;MACdP,UAAU,CAACM,GAAG,CAAC,GAAGC,SAAS;IAC7B;IAEAA,SAAS,CAACC,IAAI,CAACN,CAAC,CAAC;EACnB;EAEA,KAAK,IAAIO,IAAI,IAAIT,UAAU,EAAE;IAC3B,IAAIU,SAAS,GAAGV,UAAU,CAACS,IAAI,CAAC;IAEhCE,YAAY,EACZ,KAAK,IAAIC,CAAC,GAAGF,SAAS,CAACP,MAAM,GAAG,CAAC,EAAES,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC7C,IAAIC,WAAW,GAAGH,SAAS,CAACE,CAAC,CAAC;MAC9B,IAAIE,QAAQ,GAAGvB,MAAM,CAACsB,WAAW,CAAC;MAClC,IAAIE,WAAW,GAAGL,SAAS,CAACE,CAAC,GAAG,CAAC,CAAC;MAClC,IAAII,QAAQ,GAAGzB,MAAM,CAACwB,WAAW,CAAC;MAElCE,aAAa,EACb,KAAK,IAAIC,SAAS,GAAG,CAAC,EAAEA,SAAS,IAAI,CAAC,CAAC,EAAEA,SAAS,IAAI,CAAC,EAAE;QACvD,IAAIC,WAAW,GAAGD,SAAS,IAAI,CAAC;QAChC,IAAIE,IAAI,GAAGD,WAAW,GAAGN,WAAW,GAAG,CAAC,GAAGE,WAAW,GAAG,CAAC;QAC1D,IAAIM,EAAE,GAAGF,WAAW,GAAGJ,WAAW,GAAGF,WAAW;QAChD,IAAIS,KAAK,GAAGH,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;QAChC,IAAII,MAAM,GAAGJ,WAAW,GAAGL,QAAQ,GAAGE,QAAQ;QAC9C,IAAIQ,MAAM,GAAGL,WAAW,GAAGH,QAAQ,GAAGF,QAAQ;QAC9C,IAAIW,eAAe,GAAGzC,iBAAiB,CAACuC,MAAM,CAAC;QAE/C,OAAOH,IAAI,IAAIC,EAAE,EAAE;UACjB,IAAIK,mBAAmB,GAAG1C,iBAAiB,CAACO,MAAM,CAAC6B,IAAI,CAAC,CAAC;UACzDA,IAAI,IAAIE,KAAK;UAEb,IAAI7B,iBAAiB,IAChBkC,mCAAmC,CAACF,eAAe,EAAEC,mBAAmB,EAAE7B,gBAAgB,CAAC,EAC9F;YACA;UACF;UAEA,IAAI,CAAChB,UAAU,CAAC4C,eAAe,EAAEC,mBAAmB,EAAE7B,gBAAgB,CAAC,EAAE;YAAE,SAASoB,aAAa;UAAE;QACrG;QAEAO,MAAM,CAAC,CAAC,CAAC,GAAGL,WAAW,GACnBI,MAAM,CAAC,CAAC,CAAC,CAACK,MAAM,CAACJ,MAAM,CAAC,CAAC,CAAC,CAAC,GAC3BA,MAAM,CAAC,CAAC,CAAC,CAACI,MAAM,CAACL,MAAM,CAAC,CAAC,CAAC,CAAC;QAC/BA,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE;QAEdtB,OAAO,CAACO,IAAI,CAACgB,MAAM,CAAC;QACpB,SAASb,YAAY;MACvB;IACF;EACF;EAEA,OAAOV,OAAO;AAChB;AAEA,SAAS0B,mCAAmCA,CAACF,eAAe,EAAEC,mBAAmB,EAAE7B,gBAAgB,EAAE;EACnG,IAAIgC,aAAa;EACjB,IAAIC,SAAS;EACb,IAAIC,iBAAiB;EACrB,IAAIC,aAAa;EACjB,IAAI9B,CAAC,EAAE+B,CAAC;EACR,IAAIrB,CAAC,EAAEsB,CAAC;EAER,KAAKhC,CAAC,GAAG,CAAC,EAAE+B,CAAC,GAAGR,eAAe,CAACtB,MAAM,EAAED,CAAC,GAAG+B,CAAC,EAAE/B,CAAC,EAAE,EAAE;IAClD2B,aAAa,GAAGJ,eAAe,CAACvB,CAAC,CAAC;IAClC4B,SAAS,GAAGD,aAAa,CAAC,CAAC,CAAC;IAE5B,KAAKjB,CAAC,GAAG,CAAC,EAAEsB,CAAC,GAAGR,mBAAmB,CAACvB,MAAM,EAAES,CAAC,GAAGsB,CAAC,EAAEtB,CAAC,EAAE,EAAE;MACtDmB,iBAAiB,GAAGL,mBAAmB,CAACd,CAAC,CAAC;MAC1CoB,aAAa,GAAGD,iBAAiB,CAAC,CAAC,CAAC;MAEpC,IAAI9C,YAAY,CAAC6C,SAAS,EAAEE,aAAa,EAAE,IAAI,CAAC,IAC3C,CAACjD,gBAAgB,CAAC8C,aAAa,EAAEE,iBAAiB,EAAElC,gBAAgB,CAAC,EAAE;QAC1E,OAAO,KAAK;MACd;IACF;EACF;EAEA,OAAO,IAAI;AACb;AAEAsC,MAAM,CAACC,OAAO,GAAG9C,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}