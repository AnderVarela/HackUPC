{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Browser = exports.Service = exports.Bonjour = void 0;\nconst registry_1 = __importDefault(require(\"./lib/registry\"));\nconst mdns_server_1 = __importDefault(require(\"./lib/mdns-server\"));\nconst browser_1 = __importDefault(require(\"./lib/browser\"));\nexports.Browser = browser_1.default;\nconst service_1 = __importDefault(require(\"./lib/service\"));\nexports.Service = service_1.default;\nclass Bonjour {\n  constructor(opts = {}, errorCallback) {\n    this.server = new mdns_server_1.default(opts, errorCallback);\n    this.registry = new registry_1.default(this.server);\n  }\n  publish(opts) {\n    return this.registry.publish(opts);\n  }\n  unpublishAll(callback) {\n    return this.registry.unpublishAll(callback);\n  }\n  find(opts = null, onup) {\n    return new browser_1.default(this.server.mdns, opts, onup);\n  }\n  findOne(opts = null, timeout = 10000, callback) {\n    const browser = new browser_1.default(this.server.mdns, opts);\n    var timer;\n    browser.once('up', service => {\n      if (timer !== undefined) clearTimeout(timer);\n      browser.stop();\n      if (callback) callback(service);\n    });\n    timer = setTimeout(() => {\n      browser.stop();\n      if (callback) callback(null);\n    }, timeout);\n    return browser;\n  }\n  destroy(callback) {\n    this.registry.destroy();\n    this.server.mdns.destroy(callback);\n  }\n}\nexports.Bonjour = Bonjour;\nexports.default = Bonjour;","map":{"version":3,"names":["registry_1","__importDefault","require","mdns_server_1","browser_1","exports","Browser","default","service_1","Service","Bonjour","constructor","opts","errorCallback","server","registry","publish","unpublishAll","callback","find","onup","mdns","findOne","timeout","browser","timer","once","service","undefined","clearTimeout","stop","setTimeout","destroy"],"sources":["../src/index.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;AACA,MAAAA,UAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,aAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,SAAA,GAAAH,eAAA,CAAAC,OAAA;AA+EiDG,OAAA,CAAAC,OAAA,GA/E1CF,SAAA,CAAAG,OAAO;AACd,MAAAC,SAAA,GAAAP,eAAA,CAAAC,OAAA;AA8ESG,OAAA,CAAAI,OAAA,GA9EFD,SAAA,CAAAD,OAAO;AAEd,MAAaG,OAAO;EAUhBC,YAAYC,IAAA,GAA+B,EAAE,EAAEC,aAAoC;IAC/E,IAAI,CAACC,MAAM,GAAO,IAAIX,aAAA,CAAAI,OAAM,CAACK,IAAI,EAAEC,aAAa,CAAC;IACjD,IAAI,CAACE,QAAQ,GAAK,IAAIf,UAAA,CAAAO,OAAQ,CAAC,IAAI,CAACO,MAAM,CAAC;EAC/C;EAOOE,OAAOA,CAACJ,IAAmB;IAC9B,OAAO,IAAI,CAACG,QAAQ,CAACC,OAAO,CAACJ,IAAI,CAAC;EACtC;EAOOK,YAAYA,CAACC,QAAuC;IACvD,OAAO,IAAI,CAACH,QAAQ,CAACE,YAAY,CAACC,QAAQ,CAAC;EAC/C;EAQOC,IAAIA,CAACP,IAAA,GAA6B,IAAI,EAAEQ,IAAiC;IAC5E,OAAO,IAAIhB,SAAA,CAAAG,OAAO,CAAC,IAAI,CAACO,MAAM,CAACO,IAAI,EAAET,IAAI,EAAEQ,IAAI,CAAC;EACpD;EASOE,OAAOA,CAACV,IAAA,GAA6B,IAAI,EAAEW,OAAO,GAAG,KAAK,EAAEL,QAA2B;IAC1F,MAAMM,OAAO,GAAY,IAAIpB,SAAA,CAAAG,OAAO,CAAC,IAAI,CAACO,MAAM,CAACO,IAAI,EAAET,IAAI,CAAC;IAC5D,IAAIa,KAAqB;IACzBD,OAAO,CAACE,IAAI,CAAC,IAAI,EAAGC,OAAgB,IAAI;MACpC,IAAGF,KAAK,KAAKG,SAAS,EAAEC,YAAY,CAACJ,KAAK,CAAC;MAC3CD,OAAO,CAACM,IAAI,EAAE;MACd,IAAGZ,QAAQ,EAAEA,QAAQ,CAACS,OAAO,CAAC;IAClC,CAAC,CAAC;IACFF,KAAK,GAAGM,UAAU,CAAC,MAAK;MACpBP,OAAO,CAACM,IAAI,EAAE;MACd,IAAGZ,QAAQ,EAAEA,QAAQ,CAAC,IAAI,CAAC;IAC/B,CAAC,EAAEK,OAAO,CAAC;IACX,OAAOC,OAAO;EAClB;EAMOQ,OAAOA,CAACd,QAA2B;IACtC,IAAI,CAACH,QAAQ,CAACiB,OAAO,EAAE;IACvB,IAAI,CAAClB,MAAM,CAACO,IAAI,CAACW,OAAO,CAACd,QAAQ,CAAC;EACtC;;AAxEJb,OAAA,CAAAK,OAAA,GAAAA,OAAA;AA8EAL,OAAA,CAAAE,OAAA,GAAeG,OAAO","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}