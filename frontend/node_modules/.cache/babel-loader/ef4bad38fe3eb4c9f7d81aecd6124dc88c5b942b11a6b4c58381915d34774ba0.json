{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getModuleResolver = exports.getAstFromProgram = exports.getCanonicalFileName = exports.ensureAbsolutePath = exports.createHash = exports.createDefaultCompilerOptionsFromExtra = exports.canonicalDirname = exports.CORE_COMPILER_OPTIONS = void 0;\nconst path_1 = __importDefault(require(\"path\"));\nconst ts = __importStar(require(\"typescript\"));\n/**\n * Compiler options required to avoid critical functionality issues\n */\nconst CORE_COMPILER_OPTIONS = {\n  noEmit: true,\n  /**\n   * Flags required to make no-unused-vars work\n   */\n  noUnusedLocals: true,\n  noUnusedParameters: true\n};\nexports.CORE_COMPILER_OPTIONS = CORE_COMPILER_OPTIONS;\n/**\n * Default compiler options for program generation\n */\nconst DEFAULT_COMPILER_OPTIONS = Object.assign(Object.assign({}, CORE_COMPILER_OPTIONS), {\n  allowNonTsExtensions: true,\n  allowJs: true,\n  checkJs: true\n});\nfunction createDefaultCompilerOptionsFromExtra(parseSettings) {\n  if (parseSettings.debugLevel.has('typescript')) {\n    return Object.assign(Object.assign({}, DEFAULT_COMPILER_OPTIONS), {\n      extendedDiagnostics: true\n    });\n  }\n  return DEFAULT_COMPILER_OPTIONS;\n}\nexports.createDefaultCompilerOptionsFromExtra = createDefaultCompilerOptionsFromExtra;\n// typescript doesn't provide a ts.sys implementation for browser environments\nconst useCaseSensitiveFileNames = ts.sys !== undefined ? ts.sys.useCaseSensitiveFileNames : true;\nconst correctPathCasing = useCaseSensitiveFileNames ? filePath => filePath : filePath => filePath.toLowerCase();\nfunction getCanonicalFileName(filePath) {\n  let normalized = path_1.default.normalize(filePath);\n  if (normalized.endsWith(path_1.default.sep)) {\n    normalized = normalized.slice(0, -1);\n  }\n  return correctPathCasing(normalized);\n}\nexports.getCanonicalFileName = getCanonicalFileName;\nfunction ensureAbsolutePath(p, tsconfigRootDir) {\n  return path_1.default.isAbsolute(p) ? p : path_1.default.join(tsconfigRootDir || process.cwd(), p);\n}\nexports.ensureAbsolutePath = ensureAbsolutePath;\nfunction canonicalDirname(p) {\n  return path_1.default.dirname(p);\n}\nexports.canonicalDirname = canonicalDirname;\nconst DEFINITION_EXTENSIONS = [ts.Extension.Dts, ts.Extension.Dcts, ts.Extension.Dmts];\nfunction getExtension(fileName) {\n  var _a;\n  if (!fileName) {\n    return null;\n  }\n  return (_a = DEFINITION_EXTENSIONS.find(definitionExt => fileName.endsWith(definitionExt))) !== null && _a !== void 0 ? _a : path_1.default.extname(fileName);\n}\nfunction getAstFromProgram(currentProgram, parseSettings) {\n  const ast = currentProgram.getSourceFile(parseSettings.filePath);\n  // working around https://github.com/typescript-eslint/typescript-eslint/issues/1573\n  const expectedExt = getExtension(parseSettings.filePath);\n  const returnedExt = getExtension(ast === null || ast === void 0 ? void 0 : ast.fileName);\n  if (expectedExt !== returnedExt) {\n    return undefined;\n  }\n  return ast && {\n    ast,\n    program: currentProgram\n  };\n}\nexports.getAstFromProgram = getAstFromProgram;\nfunction getModuleResolver(moduleResolverPath) {\n  let moduleResolver;\n  try {\n    moduleResolver = require(moduleResolverPath);\n  } catch (error) {\n    const errorLines = ['Could not find the provided parserOptions.moduleResolver.', 'Hint: use an absolute path if you are not in control over where the ESLint instance runs.'];\n    throw new Error(errorLines.join('\\n'));\n  }\n  return moduleResolver;\n}\nexports.getModuleResolver = getModuleResolver;\n/**\n * Hash content for compare content.\n * @param content hashed contend\n * @returns hashed result\n */\nfunction createHash(content) {\n  var _a;\n  // No ts.sys in browser environments.\n  if ((_a = ts.sys) === null || _a === void 0 ? void 0 : _a.createHash) {\n    return ts.sys.createHash(content);\n  }\n  return content;\n}\nexports.createHash = createHash;","map":{"version":3,"names":["path_1","__importDefault","require","ts","__importStar","CORE_COMPILER_OPTIONS","noEmit","noUnusedLocals","noUnusedParameters","exports","DEFAULT_COMPILER_OPTIONS","Object","assign","allowNonTsExtensions","allowJs","checkJs","createDefaultCompilerOptionsFromExtra","parseSettings","debugLevel","has","extendedDiagnostics","useCaseSensitiveFileNames","sys","undefined","correctPathCasing","filePath","toLowerCase","getCanonicalFileName","normalized","default","normalize","endsWith","sep","slice","ensureAbsolutePath","p","tsconfigRootDir","isAbsolute","join","process","cwd","canonicalDirname","dirname","DEFINITION_EXTENSIONS","Extension","Dts","Dcts","Dmts","getExtension","fileName","_a","find","definitionExt","extname","getAstFromProgram","currentProgram","ast","getSourceFile","expectedExt","returnedExt","program","getModuleResolver","moduleResolverPath","moduleResolver","error","errorLines","Error","createHash","content"],"sources":["../../src/create-program/shared.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}