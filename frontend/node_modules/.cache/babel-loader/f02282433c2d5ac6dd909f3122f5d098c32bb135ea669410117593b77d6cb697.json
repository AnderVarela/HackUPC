{"ast":null,"code":"\"use strict\";\n\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ExpiringCache_cacheDurationSeconds, _ExpiringCache_map;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExpiringCache = exports.DEFAULT_TSCONFIG_CACHE_DURATION_SECONDS = void 0;\nexports.DEFAULT_TSCONFIG_CACHE_DURATION_SECONDS = 30;\nconst ZERO_HR_TIME = [0, 0];\n/**\n * A map with key-level expiration.\n */\nclass ExpiringCache {\n  constructor(cacheDurationSeconds) {\n    _ExpiringCache_cacheDurationSeconds.set(this, void 0);\n    _ExpiringCache_map.set(this, new Map());\n    __classPrivateFieldSet(this, _ExpiringCache_cacheDurationSeconds, cacheDurationSeconds, \"f\");\n  }\n  set(key, value) {\n    __classPrivateFieldGet(this, _ExpiringCache_map, \"f\").set(key, {\n      value,\n      lastSeen: __classPrivateFieldGet(this, _ExpiringCache_cacheDurationSeconds, \"f\") === 'Infinity' ?\n      // no need to waste time calculating the hrtime in infinity mode as there's no expiry\n      ZERO_HR_TIME : process.hrtime()\n    });\n    return this;\n  }\n  get(key) {\n    const entry = __classPrivateFieldGet(this, _ExpiringCache_map, \"f\").get(key);\n    if ((entry === null || entry === void 0 ? void 0 : entry.value) != null) {\n      if (__classPrivateFieldGet(this, _ExpiringCache_cacheDurationSeconds, \"f\") === 'Infinity') {\n        return entry.value;\n      }\n      const ageSeconds = process.hrtime(entry.lastSeen)[0];\n      if (ageSeconds < __classPrivateFieldGet(this, _ExpiringCache_cacheDurationSeconds, \"f\")) {\n        // cache hit woo!\n        return entry.value;\n      } else {\n        // key has expired - clean it up to free up memory\n        __classPrivateFieldGet(this, _ExpiringCache_map, \"f\").delete(key);\n      }\n    }\n    // no hit :'(\n    return undefined;\n  }\n  clear() {\n    __classPrivateFieldGet(this, _ExpiringCache_map, \"f\").clear();\n  }\n}\nexports.ExpiringCache = ExpiringCache;\n_ExpiringCache_cacheDurationSeconds = new WeakMap(), _ExpiringCache_map = new WeakMap();","map":{"version":3,"names":["exports","DEFAULT_TSCONFIG_CACHE_DURATION_SECONDS","ZERO_HR_TIME","ExpiringCache","constructor","cacheDurationSeconds","_ExpiringCache_cacheDurationSeconds","set","_ExpiringCache_map","Map","__classPrivateFieldSet","key","value","__classPrivateFieldGet","lastSeen","process","hrtime","get","entry","ageSeconds","delete","undefined","clear"],"sources":["../../src/parseSettings/ExpiringCache.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;AAEaA,OAAA,CAAAC,uCAAuC,GAAG,EAAE;AACzD,MAAMC,YAAY,GAAqB,CAAC,CAAC,EAAE,CAAC,CAAC;AAO7C;;;AAGA,MAAaC,aAAa;EAWxBC,YAAYC,oBAA0C;IAV7CC,mCAAA,CAAAC,GAAA;IAEAC,kBAAA,CAAAD,GAAA,OAAO,IAAIE,GAAG,EAMpB;IAGDC,sBAAA,KAAI,EAAAJ,mCAAA,EAAyBD,oBAAoB;EACnD;EAEAE,GAAGA,CAACI,GAAS,EAAEC,KAAa;IAC1BC,sBAAA,KAAI,EAAAL,kBAAA,MAAK,CAACD,GAAG,CAACI,GAAG,EAAE;MACjBC,KAAK;MACLE,QAAQ,EACND,sBAAA,KAAI,EAAAP,mCAAA,MAAsB,KAAK,UAAU;MACrC;MACAJ,YAAY,GACZa,OAAO,CAACC,MAAM;KACrB,CAAC;IACF,OAAO,IAAI;EACb;EAEAC,GAAGA,CAACN,GAAS;IACX,MAAMO,KAAK,GAAGL,sBAAA,KAAI,EAAAL,kBAAA,MAAK,CAACS,GAAG,CAACN,GAAG,CAAC;IAChC,IAAI,CAAAO,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEN,KAAK,KAAI,IAAI,EAAE;MACxB,IAAIC,sBAAA,KAAI,EAAAP,mCAAA,MAAsB,KAAK,UAAU,EAAE;QAC7C,OAAOY,KAAK,CAACN,KAAK;;MAGpB,MAAMO,UAAU,GAAGJ,OAAO,CAACC,MAAM,CAACE,KAAK,CAACJ,QAAQ,CAAC,CAAC,CAAC,CAAC;MACpD,IAAIK,UAAU,GAAGN,sBAAA,KAAI,EAAAP,mCAAA,MAAsB,EAAE;QAC3C;QACA,OAAOY,KAAK,CAACN,KAAK;OACnB,MAAM;QACL;QACAC,sBAAA,KAAI,EAAAL,kBAAA,MAAK,CAACY,MAAM,CAACT,GAAG,CAAC;;;IAGzB;IACA,OAAOU,SAAS;EAClB;EAEAC,KAAKA,CAAA;IACHT,sBAAA,KAAI,EAAAL,kBAAA,MAAK,CAACc,KAAK,EAAE;EACnB;;AAjDFtB,OAAA,CAAAG,aAAA,GAAAA,aAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}